<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Copyright (c) Open Source Strategies, Inc.
 *
 * Opentaps is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Affero General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Opentaps is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with Opentaps.  If not, see <http://www.gnu.org/licenses/>.
 *
 *  @author Leon Torres (leon@opensourcestrategies.com)
-->

<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="main-section-decorator">
        <section>
            <actions>
                <set field="sectionName" value="reports" global="true"/>
                <set field="sectionStyle" value="twoColumn"/>
                <set field="requiredPermission" value="FINANCIALS_RPT"/>
            </actions>
            <widgets>
                <include-screen name="main-section-template" location="component://opentaps-common/widget/screens/common/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>

    <screen name="reports">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsReportesContables"/>
                <set field="sectionHeaderUiLabel" value="FinancialsReportesContables"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESCONTRPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/reportsAvailable.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="reportsPresEgre">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsReportesPresEgresos"/>
                <set field="sectionHeaderUiLabel" value="FinancialsReportesPresEgresos"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESPEGRERPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/reportsPresEgre.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="reportsLeyIng">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsReportesLeyIngresos"/>
                <set field="sectionHeaderUiLabel" value="FinancialsReportesLeyIngresos"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESLINGRPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/reportsLeyIng.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="reportsAnaliticos">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsReportesAnaliticos"/>
                <set field="sectionHeaderUiLabel" value="FinancialsReportesAnaliticos"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESANALITRPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/reportsAnaliticos.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="reportsCatalogos">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsReportesCatalogos"/>
                <set field="sectionHeaderUiLabel" value="FinancialsReportesCatalogos"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESCATRPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/reportsCatalogos.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="reportsCuentasAux">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsReportesCuentasAux"/>
                <set field="sectionHeaderUiLabel" value="FinancialsReportesCuentasAux"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESCAUXRPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/reportsCuentasAux.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="reportsConac">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsReportesConac"/>
                <set field="sectionHeaderUiLabel" value="FinancialsReportesConac"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESCONACRPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/reportsConac.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="reportsFirma">
        <section>
            <actions>
                <set field="pageTitleLabel" value="CommonReportsFirma"/>
                <set field="sectionHeaderUiLabel" value="CommonReportsFirma"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <entity-condition entity-name="ReporteCatalogo" list="reporteCatalogo">                   					
					 <order-by field-name="reporteId"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESRPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/reportsFirma.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                        <!-- <container style="form">
                            <platform-specific>
                                <html><html-template location="component://financials/webapp/financials/reports/reportsAvailable.ftl"/></html>
                            </platform-specific>
                        </container> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>        

    <screen name="BalanceSheet">
        <section>
            <actions>
                <set field="pageTitleLabel" value="AccountingBalanceSheet"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="BalanceSheet"/>
                <set field="reportRequest" value="JRBalanceSheet"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/balanceSheet.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/constructGlAccountBalanceTrees.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.AccountingBalanceSheet}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/stateReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/balanceSheet.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="PostedBalances">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsPostedBalancesByGlAccount"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/postedBalances.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsPostedBalancesByGlAccount}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/postedBalances.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="TrialBalance">
        <section>
            <actions>
                <set field="pageTitleLabel" value="AccountingTrialBalance"/>
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="TrialBalance"/>
                <set field="reportRequest" value="JRTrialBalance"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/trialBalance.bsh"/> 
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/constructGlAccountBalanceTrees.bsh"/> 
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.AccountingTrialBalance}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/stateReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/trialBalance.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="TransactionSummary">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsTransactionSummary"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/transactionSummary.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsTransactionSummary}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/transactionSummary.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ComparativeBalance">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsComparativeBalance"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="ComparativeBalance"/>
                <set field="reportRequest" value="JRComparativeBalance"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseComparativeStateOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/comparativeBalance.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsComparativeBalance}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/comparativeStateReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/comparativeBalance.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ComparativeIncomeStatement">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsComparativeIncomeStatement"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="ComparativeIncomeStatement"/>
                <set field="reportRequest" value="JRComparativeIncomeStatement"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseComparativeFlowOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/comparativeIncomeStatement.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsComparativeIncomeStatement}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/comparativeFlowReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/comparativeIncomeStatement.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="IncomeStatement">
        <section>
            <actions>
                <set field="pageTitleLabel" value="AccountingIncomeStatement"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="IncomeStatement"/>
                <set field="reportRequest" value="JRIncomeStatement"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/incomeStatement.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/constructGlAccountTrees.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.AccountingIncomeStatement}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/flowReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/incomeStatement.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="CashFlowStatement">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsCashFlowStatement"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="CashFlowStatement"/>
                <set field="reportRequest" value="JRCashFlowStatement"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/cashFlowStatement.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsCashFlowStatement}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/flowReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/cashFlowStatement.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ComparativeCashFlowStatement">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsComparativeCashFlowStatement"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="ComparativeCashFlowStatement"/>
                <set field="reportRequest" value="JRComparativeCashFlowStatement"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseComparativeFlowOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/comparativeCashFlowStatement.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsComparativeCashFlowStatement}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/comparativeFlowReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/comparativeCashFlowStatement.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EquityStatement">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsEquityStatement"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseComparativeStateOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/comparativeBalance.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsEquityStatement}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/comparativeStateReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/equityStatement.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="TaxSummary">
        <section>
            <actions>
                <set field="pageTitleLabel" value="AccountingTaxSummary"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <entity-and entity-name="TaxAuthorityGlAccountBalance" list="balances">
                    <field-map field-name="organizationPartyId"/>
                </entity-and>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/setTaxSummaryToHistory.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <include-form name="TaxSummary" location="component://financials/widget/financials/forms/reports/ReportsForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="TaxGlAccountDetails">
        <section>
            <actions>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="reportType" value="TAX"/> <!-- triggers report to be tax based in glAccountStatement.bsh -->
                <set field="returnPage" value="TaxSummary"/>
                <set field="returnLabel" value="FinancialsReturnToTaxSummary"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/glAccountStatement.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsSalesTaxDetailReport}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/flowReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/glAccountStatement.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="AccountActivitiesDetail">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsAccountActivitiesDetail"/>
                <set field="sectionHeaderUiLabel" value="FinancialsAccountActivitiesDetail"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/AccountActivitiesDetail.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <container style="screenlet">
                            <platform-specific>
                                <html><html-template location="component://financials/webapp/financials/reports/AccountActivitiesDetail.ftl"/></html>
                            </platform-specific>
                        </container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="InventoryValuationReport">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsInventoryValuationReport"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="productIdInputRequested" value="true"/>
                <set field="disableTags" value="true"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/inventoryValuationReport.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsInventoryValuationReport}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/stateReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/inventoryValuationReport.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="InventoryValueDetail">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsInventoryValueDetail"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="productIdInputRequested" value="true"/>
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/setInventoryValueDetailToHistory.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsInventoryValueDetail}">
                          <section>
                            <actions>
                              <script location="component://financials/webapp/financials/WEB-INF/actions/reports/inventoryValueDetail.bsh"/>
                            </actions>
                            <widgets>
                              <container style="screenlet-body">
                                <platform-specific><html>
                                  <html-template location="component://financials/webapp/financials/reports/inventoryValueDetail.ftl"/>
                                </html></platform-specific>
                              </container>
                            </widgets>
                          </section>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="SalesAndInventory">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsSalesAndInventory"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="productIdInputRequested" value="true"/>
                <set field="disableTags" value="true"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/SalesAndInventory.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.FinancialsSalesAndInventory}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/flowReportOptions.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                        <container style="screenlet">
                            <platform-specific><html>
                                <html-template location="component://financials/webapp/financials/reports/SalesAndInventory.ftl"/>
                            </html></platform-specific>
                        </container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="AverageDSOReport">
        <section>
            <actions>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/AverageDSOReport.bsh"/>
            </actions>
            <widgets>
                <frame-container title="${groovy:uiLabelMap.get(reportTitle)}">
                  <platform-specific><html>
                    <html-template location="component://financials/webapp/financials/includes/flowReportOptions.ftl"/>
                  </html></platform-specific>
                </frame-container>
                <container style="screenlet">
                    <platform-specific><html>
                        <html-template location="component://financials/webapp/financials/reports/AverageDSOReport.ftl"/>
                    </html></platform-specific>
                </container>
            </widgets>
        </section>
    </screen>

    <screen name="GlActivityAnalysisSetup">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsGlActivitySetupTitle"/>
                <set field="printAction" value="GlActivityAnalysisPrepareDataPrint"/>
                <set field="commonAction" value="GlActivityAnalysisPrepareData"/>
                <set field="reportPath" value="component://financials/webapp/financials/reports/repository/GLActivityReport.jrxml"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/GlActivityAnalysisSetup.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <platform-specific>
                            <html><html-template location="component://financials/webapp/financials/reports/GlActivityAnalysisSetup.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="SalesTaxReportSetup">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsSalesTaxStatement"/>
                <set field="printAction" value="SalesTaxReportPrepareDataPrint"/>
                <set field="reportPath" value="component://financials/webapp/financials/reports/repository/DatamartSalesTaxReport.jrxml"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/SalesTaxReportSetup.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <platform-specific>
                            <html><html-template location="component://financials/webapp/financials/reports/SalesTaxReportSetup.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="BalanceReportSetup">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsBalanceStatement"/>
                <set field="printAction" value="BalanceTaxReportPrepareDataPrint"/>
                <set field="reportPath" value="component://financials/webapp/financials/reports/repository/BalanceReport.jrxml"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/BalanceReportSetup.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <platform-specific>
                            <html><html-template location="component://financials/webapp/financials/reports/BalanceReportSetup.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>    

    <screen name="SalesByStoreByDayReportSetup">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsSalesByStoreByDayReport"/>
                <set field="printAction" value="SalesByStoreByDayReportPrepareDataPrint"/>
                <set field="reportPath" value="component://financials/webapp/financials/reports/repository/SalesByStoreByDayReport.jrxml"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/SalesByStoreByDayReportSetup.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <platform-specific>
                            <html><html-template location="component://financials/webapp/financials/reports/SalesByStoreByDayReportSetup.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- Pantallas CUSTOM @JSCF -->
    <screen name="EstadoDeSituacionFinanciera">
        <section>
            <actions>
                <set field="pageTitleLabel" value="SituacionFinanciera"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="EstadoDeSituacionFinanciera"/>
                <set field="reportRequest" value="JREdoSituacionFinanciera"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseComparativeStateOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/comparativeSitFinanciera.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.SituacionFinanciera}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/comparativeStateReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/situacionFinanciera.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>    

    <screen name="EstadoDeActividades">
        <section>
            <actions>
                <set field="pageTitleLabel" value="EdoActividades"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="EstadoDeActividades"/>
                <set field="reportRequest" value="JREdoActividades"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseComparativeFlowOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/comparativeEdoActividades.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.EdoActividades}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/comparativeFlowReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/estadoActividades.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>  
    
    <screen name="EstadoAnaliticoActivo">
        <section>
            <actions>
                <set field="pageTitleLabel" value="EdoAnaliticoActivo"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="EstadoAnaliticoActivo"/>
                <set field="reportRequest" value="JREdoAnalitico"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
				<script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
				<script location="component://financials/webapp/financials/WEB-INF/actions/reports/edoAnaliticoAct.bsh"/>  
				<script location="component://financials/webapp/financials/WEB-INF/actions/reports/constructGlAccountBalanceTrees.bsh"/>            
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.EdoAnaliticoActivo}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/stateReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/analiticoActivo.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>       
    
    <screen name="EstadoFlujoEfectivo">
        <section>
            <actions>
                <set field="pageTitleLabel" value="EdoFlujoEfect"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="EstadoFlujoEfectivo"/>
                <set field="reportRequest" value="JREdoFlujosEfec"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
                <script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseComparativeFlowOptions.bsh"/>
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/comparativeFlujoDeEfectivo.bsh"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.EdoFlujoEfect}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/comparativeFlowReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/comparativeFlujoDeEfectivo.ftl"/>
                          </html></platform-specific>                    
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>   
    
	<screen name="VariacionPat">
        <section>
            <actions>
                <set field="pageTitleLabel" value="VariacionHacienda"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/> <!-- for the ftl -->
                <set field="returnPage" value="reports"/>
                <set field="returnLabel" value="FinancialsReturnToReports"/>
                <set field="screenRequest" value="VariacionPatrimonio"/>
                <set field="reportRequest" value="JRVariacionPatr"/>
                <set field="doCsv" value="Y"/> <!-- PDF and XLS by default -->
				<script location="component://financials/webapp/financials/WEB-INF/actions/includes/parseReportOptions.bsh"/>
				<script location="component://financials/webapp/financials/WEB-INF/actions/reports/edoVariacionPatrimonio.bsh"/>  
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="${uiLabelMap.VariacionHacienda}">
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/includes/stateReportOptions.ftl"/>
                          </html></platform-specific>
                          <platform-specific><html>
                            <html-template location="component://financials/webapp/financials/reports/edoVariacionPatrimonio.ftl"/>
                          </html></platform-specific>
                        </frame-container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>                  

	<!-- @JSCF -->
    
    <screen name="emptyReportScreen">
        <section>
            <actions>
                <set field="pageTitleLabel" value="Informes"/>  
                <set field="sectionHeaderUiLabel" value="Informes"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                                <platform-specific><html>
                                    <html-template location="component://financials/webapp/financials/tesoreria/emptyScreen.ftl"/>
                                </html></platform-specific>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="DatosContabilidadElec">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsContabilidadElec"/>  
                <set field="sectionHeaderUiLabel" value="FinancialsContabilidadElec"/>
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>
                            <condition>
                                <or>
                                    <if-has-permission permission="FINANCIALS_RPT" action="_VIEW"/>
                                </or>
                            </condition>
                            <widgets>
                            <frame-container>
                                <platform-specific><html>
                                    <html-template location="component://financials/webapp/financials/reports/datosContElectronica.ftl"/>
                                </html></platform-specific>
                            </frame-container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
        
    <screen name="VerReportesPendientes">
        <section>
            <actions>
                <set field="pageTitleLabel" value="FinancialsReportesPendientes"/>  
                <script location="component://financials/webapp/financials/WEB-INF/actions/reports/listaReportesPendientes.bsh"/>                
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <platform-specific>
                           <html><html-template location="component://financials/webapp/financials/reports/listReportesPendientes.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="NuevoFirmante">
        <section>
            <actions>
                <set field="pageTitleLabel" value="CommonReportsFirma"/>
                <set field="sectionHeaderUiLabel" value="CommonReportsFirma"/>
                <set field="workFlowId" from-field="parameters.workFlowId"/>
                <set field="reporteId" from-field="parameters.reporteId"/>                
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <section>                            
                            <widgets>
                                <container style="form">
                                    <platform-specific>
                                        <html><html-template location="component://financials/webapp/financials/reports/nuevoFirmante.ftl"/></html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
                            </fail-widgets>
                        </section>
                        <!-- <container style="form">
                            <platform-specific>
                                <html><html-template location="component://financials/webapp/financials/reports/reportsAvailable.ftl"/></html>
                            </platform-specific>
                        </container> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
       
    <screen name="MuestraReportes">
        <section>
            <actions>
                <set field="pageTitleLabel" value="MuestraReportes"/>  
                <set field="sectionHeaderUiLabel" value="MuestraReportes"/>  
                <java location="com.opensourcestrategies.financials.transactions.ConsultaFirmantes" invoke="buscarReportes"/>                
            </actions>
            <widgets>
                <decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                        <frame-container title="Filtros de búsqueda">
                            <platform-specific><html>
                                <html-template location="component://financials/webapp/financials/reports/consultaReportes.ftl"/>
                            </html></platform-specific>
                        </frame-container>
                        <platform-specific>
                           <html><html-template location="component://financials/webapp/financials/reports/listReportes.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

	<screen name="reportesLDF">
		<section>
			<actions>
				<set field="pageTitleLabel" value="ReportesLDF"/>
				<set field="sectionHeaderUiLabel" value="ReportesLDF"/>
				<set field="organizationPartyId" from-field="parameters.organizationPartyId"/>
			</actions>
			<widgets>
				<decorator-screen name="main-section-decorator">
					<decorator-section name="section-body">
						<section>
							<condition>
								<if-has-permission permission="FINANCIALS_RPT_OPCIONESGRPRPT_INFORMESLDF" action="_VIEW"/>
							</condition>
							<widgets>
								<container style="form">
									<platform-specific>
										<html><html-template location="component://financials/webapp/financials/reports/reportesLDF.ftl"/></html>
									</platform-specific>
								</container>
							</widgets>
							<fail-widgets>
								<include-screen name="PermissionErrorScreen" location="component://financials/widget/financials/screens/common/CommonScreens.xml"/>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="verReporteConciliacion">
		<section>
            <actions>
            	<set field="titleProperty" value="ConciliacionContPres"/>
            </actions> 
			<widgets>
				<decorator-screen name="main-section-decorator">
                    <decorator-section name="section-body">
                      <platform-specific><html><html-template location="component://financials/webapp/financials/reports/reporteConciliacion.ftl"/></html></platform-specific>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
    </screen>

</screens>

